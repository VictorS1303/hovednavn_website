---
import Logo from "../components/Logo.astro"

const {
  class: className,
  id: id,
  currentPage: currentPageProp,
  isSingleView,
  navItems = [],
} = Astro.props

const currentPage = new URL(Astro.request.url).pathname
const isHome = currentPage === "/"
console.log(currentPage)
---

<button
  class="btn mobile-menu-toggle-btn text-white z-[1000] fixed top-4 right-4 text-2xl cursor-pointer transition-right duration-400 ease-in md:hidden"
  id="mobile_menu_toggle_btn">
  <i class="fas fa-bars"></i>
</button>

<nav
  class={`${className} fixed top-0 z-[1000] pt-12 w-full px-6 transition-right duration-400 ease-in md:justify-center md:h-20 md:w-screen md:px-12 md:items-center ${isSingleView ? "" : "h-full w-[250px] -right-[250px]"}`}
  id="main_nav">
  <!-- Back arrow if in single view -->
  {
    isSingleView && (
      <div class="absolute top-4 left-4 md:static">
        <a href="/about" class="text-white text-2xl">
          <i class="fas fa-arrow-left" />
        </a>
      </div>
    )
  }

  <!-- Logo if not in single view -->
  {
    !isSingleView && (
      <div class="absolute bottom-8 left-1/2 -translate-x-1/2 md:static md:translate-x-0">
        {isHome ? (
          <Logo src="/images/logos/hovednavn_logo.png" />
        ) : (
          <a href="/">
            <Logo src="/images/logos/hovednavn_logo.png" />
          </a>
        )}
      </div>
    )
  }

  <!-- Nav Links -->
  <ul
    class="primary-font flex flex-col h-full items-center justify-center gap-8 uppercase text-xl text-white shadow-none md:flex-row md:ml-auto md:gap-8">
    {
      navItems.map((navItem) => (
        <li class="text-2xl font-bold">
          <a
            href={navItem.href}
            class={`${navItem.href === activePage ? "text-[var(--secondary-text-color)] pointer-events-none" : "hover:text-[var(--secondary-text-color)] transition-text ease-in duration-150"}`}>
            {navItem.text}
          </a>
        </li>
      ))
    }
  </ul>
</nav>

<script>
  const mobileMenuToggleBtn = document.querySelector("#mobile_menu_toggle_btn")
  const mainNav = document.querySelector("#main_nav")

  mobileMenuToggleBtn?.addEventListener("click", toggleMobileMenu)

  function toggleMobileMenu() {
    mobileMenuToggleBtn?.classList.toggle("right-[270px]")
    mainNav?.classList.toggle("right-0")
    updateMobileMenuButtonIcon()
  }

  function updateMobileMenuButtonIcon() {
    const icon = mobileMenuToggleBtn?.querySelector("i")

    icon?.classList.contains("fa-bars")
      ? (icon.classList.remove("fa-bars"), icon.classList.add("fa-times"))
      : (icon?.classList.add("fa-bars"), icon?.classList.remove("fa-times"))
  }
</script>
